<?php
use App\src\DAO\ArticleDAO;
use App\src\DAO\CommentDAO;
?>
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Mon blog</title>
</head>

<body>
<div>
    <h1>Mon blog</h1>
    <p>En construction</p>
    <?php
    $articleDAO = new ArticleDAO();
    $article = $articleDAO->getArticle($_GET['articleId']);
    ?>
    <div>
        <h2><?= htmlspecialchars($article->getTitle());?></h2>
        <p><?= htmlspecialchars($article->getContent());?></p>
        <p><?= htmlspecialchars($article->getAuthor());?></p>
        <p>Créé le : <?= htmlspecialchars($article->getDate_Creation());?></p>
    </div>
    <br>
    <a href="../public/index.php">Retour à l'accueil</a>
    <div id="comments" class="text-left" style="margin-left: 50px">
        <h3>Commentaires</h3>
        <?php
        $commentDAO = new CommentDAO();
        $comments = $commentDAO->getCommentsFromArticle($_GET['articleId']);
        foreach($comments as $comment){
            ?>
            <h4><?= htmlspecialchars($comment->getPseudo());?></h4>
            <p><?= htmlspecialchars($comment->getContent());?></p>
            <p>Posté le <?= htmlspecialchars($comment->getDate_Creation());?></p>
            <?php
        }
        ?>
    </div>
</div>
</body>
</html>